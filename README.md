# b07c-raytracing
This repository contains an example script that was used in the B07c ray-tracing calculations. The results are presented in the article:

Wang, P.Y., Walters, A., Bazan da Silva, M., et al., An Automated Method for Performing Robust Ray-tracing Simulations of Soft X-ray Beamlines, Journal of Synchrotron Radiation, in preparation.

To run the simulation, use the miniconda 3.8 installed by SHADOW3 to execute the script simulate.py. You may also have to install the pyplanemono package via pip in the same environment.

The necessary files for ray-tracing and flux calculations include:
1. Grating efficiencies (The JSON file)
2. Mirror reflectivity files generated by PREREFL (Pt_15Apr.dat and Rh_15Apr.dat)
3. Flux calculated by REFLEC (B07_flux_2mradh_... .dat)
4. Surface slope errors generated by WAVINESS. (B07_*_se.dat)
All of which can be found in the ./misc/ directory.

A sample run for cff=2.0 for the 400 l/mm grating is included in the ./results/ directory. 
The analyse.ipynb is a jupyter notebook which demonstrates how the data can be analysed.
